# 스프링

### 스프링 프레임워크란?

- Java 기반의 오픈 소스 애플리케이션 프레임워크
  - 2003년에 로드 존슨(Rod Johnson)이 개발.
  - 기업용 Java 애플리케이션 개발을 간편, 효율적으로 만들기 위해 등장

### 스프링 프레임워크의 등장 배경

- **복잡한 Java 애플리케이션의 개발 어려움**
  - 기업 환경에서는 대규모, 복잡한 Java 애플리케이션을 개발해야함
  - 그러나 당시 Java EE(Enterprise Edition)는 EJB(Enterprise JavaBeans)와 같은 무거운 기술 스택과 복잡한 설정으로 인해 개발자들이 어려움을 겪고 있었음
- **경량화와 테스트 가능성의 필요성**
  - 경량화된 프로그래밍 모델과 테스트 가능성을 갖춘 프레임워크의 필요성
- **제어 역전(Inversion of Control)의 필요성**
  - 스프링의 핵심 컨셉 중 하나, 객체 생성과 의존성 관리를 컨테이너에게 맡김으로써 객체 간 결합도를 낮추고 유지보수 및 테스트 용이성을 높임.
- **관점 지향 프로그래밍(AOP)의 필요성**
  - 핵심 비즈니스 로직과 공통 관심 사항(로깅, 보안 등)을 분리하여 코드 중복과 복잡성을 줄임.
- **모듈화와 재사용성**
  - 모듈화된 구조와 인터페이스 기반 설계를 지원하여 코드 재사용성과 유지보수 용이성을 높임.
- **다양한 기능 제공의 필요성**
  - 데이터 액세스, 웹 개발, 보안, 메시징 등 다양한 영역에서 필요한 기능들을 제공하는 다양한 모듈들로 구성

> 스프링 프레임워크는 가벼운 설정과 모듈화된 아키텍처, 확장 가능성 및 유연함 등의 장점으로 널리 사용되며, 현재까지도 많은 개발자와 기업에서 선호하는 자바 애플리케이션 개발 프레임워크로 인정

### 스프링 프레임워크의 등장과 장점

- POJO 기반의 애플리케이션 개발을 지원하는 프레임워크
- EJB같은 거창한 컨테이너 필요X
- 복잡하고 실수하기 쉬운 Low Level에 신경을 쓰지 않아도 됨
- 오픈소스라 무료
- 많은 라이브러리 지원 + 모든 플랫폼에서 사용 가능
- 웹, 어플리케이션 등 많은 분야에 적용 가능

### 스프링 프레임워크의 구조

- POJO (Plain Old Java Object)
  - 특정 환경이나 기술에 종속적이지 않은 자바객체
- PSA (portable Service Abstraction)
  - 환경, 세부기술 변경과 관계없이 일관된 방식으로 기술에 접근
  - DB 관계없이 동일하게 적용하는 트랜잭션 처리 방식
- IoC/DI (Dependency Injection)
  - 유연하게 확장 가능한 객체 생성, 객체간 의존관계는 외부에서 동적으로 설정
- AOP
  - 관심사의 분리로 SW 모듈성 향상
  - 공통 모듈을 여러코드에 적용

### 스프링 프레임워크의 특징

- 경량 컨테이너
  - 스프링은 자바객체를 담는 컨테이너
  - 자바 객체의 라이프 사이클을 관리
  - 개발자는 스프링 컨테이너에서 언제든 필요한 객체를 가져와 사용
- DI 패턴 지원
  - 설정 파일, 어노테이션을 통해 객체 간 의존 관계 설정
  - 각 객체는 의존하고 있는 객체를 직접 생성, 검색할 필요 없음
- AOP 지원
  - 문제를 바라보는 기준으로 프로그래밍 하는 기법
    - 공통 모듈을 여러 코드에 쉽게 적용할 수 있도록 함
    - 트랜잭션, 로깅, 보안 같은 기능 들을 분리하여 각 모듈에 적용 가능
- POJO 지원
  - 특정 인터페이스를 구현하거나 클래스를 상속하지 않는 일반 자바객체를 지원.
- IoC (Inversion of Control - 제어역전)
  - 스프링의 핵심 기능
  - 객체 생성 및 의존관계의 모든 제어권이 개발자에게 있었는데
    - Servlt, EJB에 대한 제어권이 스프링으로 넘어감
    - 나머지만 개발자들이 관리해주면 됨.
- 트랜잭션 처리를 위한 일관된 방법
  - 어떤 트랜잭션을 사용하든 동일한 로직으로 처리
  - 여러 환경에서 사용이 가능
- 영속성과 관련된 다양한 API 지원
  - JDBC, iBatis, mybatis, JPA 등 라이브러리와 연동 지원.
- 다양한 API 연동 지원
  - 설정파일, 어노테이션을 통해 손쉽게 사용토록 지원

### IoC & Container

- IoC/DI
  - 객체지향 언어에서 Object간 연결 관계를 런타임에 결정
  - 객체간 느슨한 연결 (loose coupling)
  - IoC 유형
    - DI방식
      - 객체가 사용할 다른 객체에 대한 의존성을 외부에서 필요한 의존성을 주입받아 사용
    - DL방식
      - 객체가 필요로 하는 의존성을 검색(lookup)하여 가져옴

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/890a9e69-6faa-4631-9803-c2c160f9f4bb/e6770023-5ca0-48aa-9dd2-d6610c765fd9/Untitled.png)

> Setter Injection이 많이 사용되긴하지만 공식 권장사양은 Constructor Injection 방식!

> 의존성(Dependency)은 객체 간의 관계를 나타냄,
> 한 객체가 다른 객체를 사용하거나 참조하는 것을 의미.

- Container
  - Container란
    - 객체의 라이프 사이클 담당
    - 애플리케이션 사용에 필요한 주요 기능 제공
  - Container 기능
    - 라이프사이클 관리
    - 의존성 객체 제공
    - Thread 관리
  - Container 필요성
    - 비즈니스 로직 외 부가적인 기능들에 대해 독립적으로 관리되기 위함
    - 서비스 look up, Configuration에 대한 일관성을 갖기 위함
    - 서비스 객체 사용을 위해 Factory | Singleton패턴 직접구현할 필요 X
  - IoC Container
    - 오브젝트 생성, 관계설정, 사용, 제거 등 작업을 독립된 컨테이너가 담당
    - 컨테이너가 코드대신 객체에 대한 제어권을 가지고 있어 IoC라 함
    - 스프링 컨테이너를 IoC컨테이너라고 부르기도 함.
    - 종류로 BeanFactory, ApplicationContext가 있다.
  - Spring DI Container
    - 컨테이너가 관리하는 객체를 Bean이라 하며
    - 이 빈들의 생명주기를 관리하는 의미로 빈팩토리라 함
    - BeanFactory에 여러 기능을 추가한것이 ApplicationContext

Spring Test

https://mvnrepository.com/

- spring 검색 → spring context → 5.3.27 가져와 프로젝트에 붙이기
- (JDK1.8은 6버전 지원X)

### IoC개념 이해하기

- 객체 제어 방식
  - 기존
    - 필요한 위치에서 개발자가 필요한 객체 생성 로직을 구현
  - IoC
    - 객체 생성을 컨테이너에게 위임
- IoC 장점
  - 객체간 결합도를 떨어뜨릴 수 있음
- 객체간 결합도가 높았을때의 문제점?
  - 유지보수시 해당 클래스와 결합된 다른 코드 까지들도 유지보수해야할 가능성 높아짐
- 강한 결합의 형태.
  - 클래스를 호출하는 방식
  - 클래스내에 선언과 구현이 모두 되어있어 다양한 형태로 변화가 불가능.
- IoC는 객체간 강한 결합을 다형성을 통해 낮춰줌
  - 클래스 호출이 아닌 인터페이스 호출 방식
    - 구현 클래스 교체가 용이, 다양한 형태로 변화 가능
      - 단, 인터페이스 교체시엔 호출 클래스도 수정해줘야하긴함
  - 팩토리 호출 방식
    - 팩토리가 구현 클래스를 생성, 클래스는 팩토리 호출
    - 인터페이스 변경시 팩토리만 수정하면 됨, 호출클래스에 영향 X
    - 단, 클래스에 팩토리 호출 소스가 들어가야하기 때문에 팩토리에 의존하게됨.

### 스프링 DI 관련 용어 정리

- 빈(Bean)
  - 스프링이 IoC 방식으로 관리하는 오브젝트
  - 스프링이 직접 생성, 제어를 담당
- 빈 팩토리 (BeanFactory)
  - 스프링이 IoC를 담당하는 핵심 컨테이너
  - Bean을 등록, 생성, 조회, 반환
  - BeanFactory를 바로 사용하지 않고 ApplicationContext를 사용
- ApplicationContext
  - BeanFactory를 확장한 IoC컨테이너
    - Bean Factory와 기능은 거의 동일
    - 각종 부가서비스를 추가로 제공
- configuration metadata (설정 정보, 메타정보)
  - ApplicationContext 또는 BeanFactory가 IoC를 적용하기 위해 사용하는 메타정보
  - Bean객체를 생성, 구성할 때 사용
- 스프링 프레임워크
  - IoC컨테이너, ApplicationContext를 포함해 스프링이 제공하는 모든 기능을 통틀어 말할때 사용.

### 스프링 컨테이너 상속도

- BeanFactory (빈객체 생성, 제공, 라이프 사이클 관리)

- ApplicationContext ( + 애플리케이션 개발에 필요한 기능, 이벤트 관리)

- WebApplicationContext (+ 웹 기능)
